import{c as S,aK as $,M as _}from"./index-DHAcTbtD.js";import{T as D}from"./index--aZuBz3I.js";import{d as h,r as L,c as f,l as N,p as O}from"./index-ZgcHhE59.js";function M(e){const t=e.lastIndexOf(".");return t===-1?"":e.substring(t+1)}function I(e){return e.replace(/^.*[\\/]/,"")}var p;function w(e){return{lang:(e==null?void 0:e.lang)??(p==null?void 0:p.lang),message:e==null?void 0:e.message,abortEarly:(e==null?void 0:e.abortEarly)??(p==null?void 0:p.abortEarly),abortPipeEarly:(e==null?void 0:e.abortPipeEarly)??(p==null?void 0:p.abortPipeEarly)}}var b;function R(e){return b==null?void 0:b.get(e)}var m;function F(e){return m==null?void 0:m.get(e)}var g;function q(e,t){var n;return(n=g==null?void 0:g.get(e))==null?void 0:n.get(t)}function G(e){var n,s;const t=typeof e;return t==="string"?`"${e}"`:t==="number"||t==="bigint"||t==="boolean"?`${e}`:t==="object"||t==="function"?(e&&((s=(n=Object.getPrototypeOf(e))==null?void 0:n.constructor)==null?void 0:s.name))??"null":t}function y(e,t,n,s,r){const a=r&&"input"in r?r.input:n.value,u=(r==null?void 0:r.expected)??e.expects??null,l=(r==null?void 0:r.received)??G(a),i={kind:e.kind,type:e.type,input:a,expected:u,received:l,message:`Invalid ${t}: ${u?`Expected ${u} but r`:"R"}eceived ${l}`,requirement:e.requirement,path:r==null?void 0:r.path,issues:r==null?void 0:r.issues,lang:s.lang,abortEarly:s.abortEarly,abortPipeEarly:s.abortPipeEarly},o=e.kind==="schema",c=(r==null?void 0:r.message)??e.message??q(e.reference,i.lang)??(o?F(i.lang):null)??s.message??R(i.lang);c!==void 0&&(i.message=typeof c=="function"?c(i):c),o&&(n.typed=!1),n.issues?n.issues.push(i):n.issues=[i]}function v(e){return{version:1,vendor:"valibot",validate(t){return e["~run"]({value:t},w())}}}function x(e,t){return{kind:"validation",type:"min_length",reference:x,async:!1,expects:`>=${e}`,requirement:e,message:t,"~run"(n,s){return n.typed&&n.value.length<this.requirement&&y(this,"length",n,s,{received:`${n.value.length}`}),n}}}function K(e,t,n){return typeof e.fallback=="function"?e.fallback(t,n):e.fallback}function C(e,t,n){return typeof e.default=="function"?e.default(t,n):e.default}function j(e,t){return{kind:"schema",type:"object",reference:j,expects:"Object",async:!1,entries:e,message:t,get"~standard"(){return v(this)},"~run"(n,s){var a;const r=n.value;if(r&&typeof r=="object"){n.typed=!0,n.value={};for(const u in this.entries){const l=this.entries[u];if(u in r||(l.type==="exact_optional"||l.type==="optional"||l.type==="nullish")&&l.default!==void 0){const i=u in r?r[u]:C(l),o=l["~run"]({value:i},s);if(o.issues){const c={type:"object",origin:"value",input:r,key:u,value:i};for(const d of o.issues)d.path?d.path.unshift(c):d.path=[c],(a=n.issues)==null||a.push(d);if(n.issues||(n.issues=o.issues),s.abortEarly){n.typed=!1;break}}o.typed||(n.typed=!1),n.value[u]=o.value}else if(l.fallback!==void 0)n.value[u]=K(l);else if(l.type!=="exact_optional"&&l.type!=="optional"&&l.type!=="nullish"&&(y(this,"key",n,s,{input:void 0,expected:`"${u}"`,path:[{type:"object",origin:"key",input:r,key:u,value:r[u]}]}),s.abortEarly))break}}else y(this,"type",n,s);return n}}}function P(e,t){return{kind:"schema",type:"optional",reference:P,expects:`(${e.expects} | undefined)`,async:!1,wrapped:e,default:t,get"~standard"(){return v(this)},"~run"(n,s){return n.value===void 0&&(this.default!==void 0&&(n.value=C(this,n,s)),n.value===void 0)?(n.typed=!0,n):this.wrapped["~run"](n,s)}}}function k(e){return{kind:"schema",type:"string",reference:k,expects:"string",async:!1,message:e,get"~standard"(){return v(this)},"~run"(t,n){return typeof t.value=="string"?t.typed=!0:y(this,"type",t,n),t}}}function T(...e){return{...e[0],pipe:e,get"~standard"(){return v(this)},"~run"(t,n){for(const s of e)if(s.kind!=="metadata"){if(t.issues&&(s.kind==="schema"||s.kind==="transformation")){t.typed=!1;break}(!t.issues||!n.abortEarly&&!n.abortPipeEarly)&&(t=s["~run"](t,n))}return t}}}function V(e,t,n){const s=e["~run"]({value:t},w(n));return{typed:s.typed,success:!s.issues,output:s.value,issues:s.issues}}const B=h((e,t)=>{const n=L("preview");return()=>{var r,a,u,l;const s=(r=e.tabsCodeList)==null?void 0:r[Number(n.value)];return f("div",null,[f("div",{class:S("b b-solid b-gray-200 rounded-md inline-block min-w-600px")},[f(D,{type:"card",value:n.value,"onUpdate:value":i=>n.value=i,items:[{label:"预览",value:"preview"},...((a=e.tabsCodeList)==null?void 0:a.map((i,o)=>({label:i.label,value:o.toString()})))??[]]},null),f("div",{class:""},[n.value==="preview"&&f("div",{class:"p-4"},[(l=(u=t.slots)==null?void 0:u.default)==null?void 0:l.call(u)]),s&&f("div",{class:"bg-gray-500 bg-white"},[f($,{code:s.code,language:s.lang},null)])])])])}},{props:["tabsCodeList"]});function H(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!O(e)}const U=j({src:T(k(),x(2)),showcode:P(k(),"")}),Q=h((e,t)=>()=>f(_,{allowDangerousHtml:!0,content:e.markdown},{customRender:n=>{var r;const s=n.ast;if(s.tagName==="sx-code"){let a;const{success:u,output:l}=V(U,s.properties);if(!u)return null;const i=(r=e.modules)==null?void 0:r[l.src];if(!i)return null;const o=l.showcode.split(",").filter(Boolean).map(c=>{var E;const d=M(c);return{label:I(c),lang:d,code:((E=e.modulesCode)==null?void 0:E[c])||""}});return f(B,{tabsCodeList:o},H(a=N(i))?a:{default:()=>[a]})}}}),{props:["markdown","modulesCode","modules"]});export{Q as C};
